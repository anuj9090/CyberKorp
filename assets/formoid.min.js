jQuery(function(e){var t,a,r,n,o,i=(a=("https:"==location.protocol?"https:":"http:")+"//formoid.net/api/push",r=8==(t=(/MSIE (\d+)\./.exec(navigator.userAgent)||[0,0])[1])||9==t&&"file:"!=location.protocol?function(t,a){var r=new XDomainRequest,n=e.Deferred();return r.open(a.type,t),r.onload=function(){n.resolve(this.responseText)},r.onerror=function(){n.reject()},r.send(a.data),n}:(e.support.cors=!0,e.ajax),n=function(e,t){return e="__"+e+"__",t.length?(this[e]=t[0],this):this[e]},(o=function(e){e=e||{},this.__email__=e.email||"",this.__title__=e.title||"",this.__data__=e.data||[],this.__recaptcha__=e.recaptcha||""}).prototype.email=function(e){return n.call(this,"email",arguments)},o.prototype.title=function(e){return n.call(this,"title",arguments)},o.prototype.recaptcha_token=function(e){return n.call(this,"recaptcha_token",arguments)},o.prototype.data=function(e){return n.call(this,"data",arguments)},o.prototype.getCaptchaToken=function(){var t=this.__recaptcha__,a=e.Deferred();return t?grecaptcha.ready(function(){try{grecaptcha.execute(t,{action:"homepage"}).then(function(e){a.resolve(e)})}catch(e){console.error(e),a.resolve(null)}}):a.resolve(null),a.promise()},o.prototype.send=function(t,n){var o,i,s,l=this,c=(o=e.Deferred(),i=this,s=["email","title","data","send"],e.each(s,function(e,t){o[t]=function(){return i[t].apply(i,arguments)}}),o),d=this.__recaptcha__?this.getCaptchaToken():e.when();return n&&(n.call(this,c),"pending"!=c.state())?c:(d.then(function(e){e&&(l.__rcph_token__=e)}).always(function(){var e={email:l.__email__,form:{title:l.__title__,data:arguments.length?t:l.__data__}};l.__rcph_token__&&(e.recaptcha_token=l.__rcph_token__),r(a,{type:"POST",data:JSON.stringify(e)}).done(function(e){try{var t=JSON.parse(e);t.error?c.reject(t.error):c.resolve(t.response)}catch(e){c.reject("Incorrect server response.")}}).fail(function(){var e="Failed to query the server. ";"onLine"in navigator&&!navigator.onLine?e+="No connection to the Internet.":e+="Check the connection and try again.",c.reject(e)})}),c)},{Form:function(e){return new o(e)}}),s=function(t){var a=!0,r=e(t).val();return r&&(a=/^([^@]+?)@(([a-z0-9]-*)*[a-z0-9]+\.)+([a-z0-9]+)$/i.test(r)),a};e('[data-form-type="formoid"]').each(function(){var t,a=e(this),r=a.is("form")?a:a.find("form"),n=r.attr("action"),o=a.find("[data-form-alert]"),l=a.is("[data-form-title]")?a:a.find("[data-form-title]"),c=a.find('[type="submit"]'),d=r.find("[data-form-field]"),f=r.find("[data-form-alert]").length?o.html():o.find("[data-form-alert-success]").html();a.find("[data-form-captcha]");r.change(function(e){"file"===e.target.type&&e.target.files[0].size>1e6&&(o.removeAttr("hidden"),o.removeClass("alert-success").addClass("alert-danger"),o.html("File size must be less than 1mb"),c.addClass("btn-loading").prop("disabled",!0))}),d.each(function(t,a){e(a).on("focus",function(){o.attr("hidden","hidden"),o.addClass("alert-success").removeClass("alert-danger"),o.html(""),c.removeClass("btn-loading").prop("disabled",!1)})}),r.submit(function(h){if("https://mobirise.com/"===n&&(h.preventDefault(),!c.hasClass("btn-loading"))){var p=[],u=d;r.addClass("form-active"),c.addClass("btn-loading").prop("disabled",!0),o.html(""),t=t||i.Form({email:a.find("[data-form-email]").val(),title:l.attr("data-form-title")||l.text(),recaptcha:a.find("[data-form-captcha]").val()||!1}),function(t){var a=e.Deferred(),r=[];return t.each(function(t,n){var i=e(n),l=i.attr("type"),d=e.Deferred();if(r.push(d),"email"===i.attr("name")&&!s(n))return c.removeClass("btn-loading").prop("disabled",!0),a.reject(new Error("Form is not valid")),!1;switch(l){case"file":var f=new FileReader,h=i.attr("data-form-field")||i.attr("name"),u=i[0].files[0];f.onloadend=function(){p.push([h,f.result]),d.resolve()},f.onerror=function(){o.html(f.error),a.reject(f.error)},u&&f.readAsDataURL(u);break;case"checkbox":p.push([i.attr("data-form-field")||i.attr("name"),i.prop("checked")?i.val():"No"]),d.resolve();break;case"radio":i.prop("checked")&&p.push([i.attr("data-form-field")||i.attr("name"),i.val()]),d.resolve();break;default:p.push([i.attr("data-form-field")||i.attr("name"),i.val()]),d.resolve()}}),a.resolve(r)}(u).then(function(a){e.when.apply(this,a).then(function(){t.send(p).always(function(){c.removeClass("btn-loading").prop("disabled",!1),o.removeAttr("hidden")}).then(function(e){r[0].reset(),r.removeClass("form-active"),o.text(f||e),o.removeClass("alert-danger").addClass("alert-success")}).fail(function(e){o.text(e),o.removeClass("alert-success").addClass("alert-danger")})},function(e){o.html(e.message),o.removeClass("alert-success").addClass("alert-danger"),o.removeAttr("hidden")})})}})})});